<div class="modal myModal" id="compResultModal" tabindex="-1" role="dialog" aria-labelledby="compResultModalLabel"
     data-backdrop="static" style="overflow:scroll">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom-width: 1px;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                <ul class="nav nav-tabs" id="myTab">
                    <li><a href="#" onclick="showInfoModal()">投诉登记信息</a></li>
                    <li><a href="#" onclick="showCaseModal()">案件事项记录</a></li>
                    <li><a href="#" onclick="showFeedModal()">科室反馈记录</a></li>
                    <li><a href="#" onclick="showProceModal()">处理过程文档</a></li>
                    <li class="active"><a onclick="" href="#">处理结果记录</a></li>
                    <li><a href="#" onclick="showRectifyModal()">分析整改记录</a></li>
                </ul>
                <h4 class="modal-title" id="compResultModalLabel" style="padding-left: 10px;"></h4>
            </div>
            <div class="modal-body" id="resultAccordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#result_collapseOne">
                                处理结果记录
                            </a>
                        </h4>
                    </div>
                    <div id="result_collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">结案时间</label>
                                <div class="col-xs-7">
                                    <input type="text" class="form-control date" placeholder="请选择">
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">赔偿时间</label>
                                <div class="col-xs-7">
                                    <input type="text" class="form-control date" placeholder="请选择">
                                </div>
                            </div>
                            <div class="form-group col-xs-12">
                                <label class="col-xs-2 control-label modal-label">结案方式</label>
                                <div class="col-xs-9">
                                    <div class="checkbox">
                                        <label class="checkbox-inline" style="padding-right: 40px;margin-right: 25px;">
                                            <input type="checkbox" value="option1">沟通理解
                                        </label>
                                        <label class="checkbox-inline" style="padding-right: 40px;margin-right: 25px;">
                                            <input type="checkbox" value="option2">放弃投诉
                                        </label>

                                        <label class="checkbox-inline" style="padding-right: 40px;">
                                            <input type="checkbox" value="option2">终止投诉
                                        </label>
                                        <label class="checkbox-inline" style="padding-right: 40px;">
                                            <input type="checkbox" value="option2">坚持维诉
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label class="checkbox-inline" style="padding-right: 40px;">
                                            <input type="checkbox" value="option2">医患协议解决
                                        </label>
                                        <label class="checkbox-inline" style="padding-right: 20px;">
                                            <input type="checkbox" value="option2">第三方调解解决
                                        </label>
                                        <label class="checkbox-inline" style="padding-right: 20px;">
                                            <input type="checkbox" value="option2">司法诉讼解决
                                        </label>
                                        <label class="checkbox-inline" style="padding-right: 20px;">
                                            <input type="checkbox" value="option2">非官方解决
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-xs-12">
                                <label class="col-xs-2 control-label modal-label">患者最终状态</label>
                                <div class="col-xs-9">
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option1">健在
                                    </label>
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option2">非残疾损伤
                                    </label>
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option2">残疾
                                    </label>
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option2">死亡
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">案例分析机构</label>
                                <div class="col-xs-7">
                                    <input type="text" class="form-control" placeholder="请输入">
                                </div>
                            </div>
                            <div class="form-group col-xs-12">
                                <label class="col-xs-2 control-label modal-label"
                                       style="width: 16%;">案例分析意见</label>
                                <div class="col-xs-9">
                                    <textarea name="" rows="3" cols="4" class="form-control"
                                              placeholder="请输入"></textarea>
                                </div>
                            </div>
                            <div class="form-group col-xs-12">
                                <label class="col-xs-2 control-label modal-label" style="width: 16%;">处理结果描述</label>
                                <div class="col-xs-9">
                                    <textarea name="" rows="3" cols="4" class="form-control"
                                              placeholder="请输入"></textarea>
                                </div>
                            </div>
                        </div>
                    </div><!-- one -->

                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#result_collapseTwo">
                                赔偿纪录
                            </a>
                        </h4>
                    </div>
                    <div id="result_collapseTwo" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group col-xs-12">
                                <div class="col-xs-9">
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option1">无赔偿
                                    </label>
                                    <label class="radio-inline" style="padding-right: 20px;">
                                        <input type="radio" name="optionsRadiosinline" value="option2">赔付患者
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">医院赔偿金额</label>
                                <div class="col-xs-7">
                                    <input type="number" class="form-control" placeholder="请输入">
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">科室赔偿金额</label>
                                <div class="col-xs-7">
                                    <input type="number" class="form-control" placeholder="请输入">
                                </div>
                            </div>
                            <div class="btn-toolbar">
                                <ul>
                                    <li>
                                        <button type="button" class="btn btn-primary"
                                                onclick="insertResultRows('resultCompensateTable');">
                                            <span class="glyphicon glyphicon-plus"></span>添加
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <table class="table table-bordered table-hover" style="border: 1px solid #ddd;"
                                   id="resultCompensateTable">
                                <thead>
                                <tr>
                                    <th style="text-align: center">科室</th>
                                    <th style="text-align: center">承担赔偿金额</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div><!-- two -->

                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#result_collapseThree">
                                医院欠费损失
                            </a>
                        </h4>
                    </div>
                    <div id="result_collapseThree" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">医院欠费损失</label>
                                <div class="col-xs-7">
                                    <input type="number" class="form-control" placeholder="请输入">
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <label class="col-xs-4 control-label modal-label">科室承担部分</label>
                                <div class="col-xs-7">
                                    <input type="number" class="form-control" placeholder="请输入">
                                </div>
                            </div>
                            <div class="btn-toolbar">
                                <ul>
                                    <li>
                                        <button type="button" class="btn btn-primary"
                                                onclick="insertResultRows('resultArrearsTable');">
                                            <span class="glyphicon glyphicon-plus"></span>添加
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <table class="table table-bordered table-hover" style="border: 1px solid #ddd;"
                                   id="resultArrearsTable">
                                <thead>
                                <tr>
                                    <th style="text-align: center">科室</th>
                                    <th style="text-align: center">承担赔偿金额</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div><!-- two -->

                </div>
                <div class="modal-footer">
                    <button type="button" id="btn_add_info_submit" class="btn btn-primary">
                        <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>保存退出
                    </button>
                    <button type="button" id="btn_add_info_save" class="btn btn-primary">
                        <span class="glyphicon" aria-hidden="true"></span>保存草稿
                    </button>
                    <button type="button" id="btn_add_info_print" class="btn btn-primary">
                        <span class="glyphicon" aria-hidden="true"></span>打印
                    </button>
                    <button type="button" id="btn_add_info_place" class="btn btn-primary">
                        <span class="glyphicon glyphicon-save" aria-hidden="true"></span>归档
                    </button>
                    <button type="button" id="btn_add_info_delete" class="btn btn-primary">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>删除
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="resultSelectDivId">
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('.date').datepicker({
            autoclose: true,
            language: "zh-CN",
            todayHighlight: true,
            clearBtn: true //清除按钮
        });
    });
    var ids = 1;

    //人员选择
    var userFeeTestDate =
        [{
            "id": "0",
            "name": "张老实"
        }, {
            "id": "1",
            "name": "王老实"
        }];

    function openFeeUserSelect() {
        SelectWindow.open("feeSelectDivId", "人员选择", userFeeSelectCallBack, userFeeTestDate, null);
    }

    function userFeeSelectCallBack(nameStr, idStr) {
    }

    //添加行
    function insertResultRows(tableId) {
        var table = $("#" + tableId);
        var deptName = "deptInput_" + ids;
        var deptId = deptName + "_id";

        var tr = '';
        tr += '<tr><td>';
        tr += '<input type="text" id="' + deptName + '" class="form-control" onclick="openCompenDept(\'' + deptName + '\')"/>';
        tr += '<input type="hidden" id="' + deptId + '"/></td>';
        tr += '<td><input type="number" class="form-control"/></td>';
        tr += '<td><a title="删除" class="toggle-tooltip" href="#" onclick="deleteCompeRows(this)">'
        tr += '<span class="glyphicon glyphicon-trash"></span></a>';
        tr += '</td></tr>';
        table.append(tr);


        ids++;
    }

    //删除行
    function deleteCompeRows(obj) {
        var table = $("#resultCompensateTable");
        var a = $(obj);
        a.parents("td").parent("tr").remove();
    }


    //部门选择---开始---
    var deptTestDate =
        [{
            "id": "0",
            "name": "住院部"
        }, {
            "id": "1",
            "name": "医疗部"
        }];

    function openCompenDept(inputId) {
        SelectWindow.open("resultSelectDivId", "部门选择", deptSelectCallBack, deptTestDate, null, inputId, inputId + "_Id");
    }

    function deptSelectCallBack(nameStr, idStr, nameInputId, idInputId) {
        $("#" + idInputId).val(idStr);
        $("#" + nameInputId).val(nameStr);
    }

    //部门选择---结束---
</script>
